<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PawTube â€“ Upload</title>
<style>
body { font-family: Arial; background:#f1f1f1; margin:0; padding:0; }
header { background:#cc0000; color:white; padding:12px 15px; display:flex; align-items:center; }
header img { height:34px; margin-right:12px; }
form { max-width:600px; margin:30px auto; background:white; padding:20px; border:1px solid #ccc; border-radius:8px; }
input, textarea { width:100%; margin-bottom:15px; padding:8px; }
button { padding:10px 20px; background:#cc0000; color:white; border:none; cursor:pointer; }
button:hover { background:#990000; }
</style>
</head>
<body>

<header>
    <a href="index.html"><img src="Logo.png" alt="PawTube"></a>
    Upload Video
</header>

<form id="uploadForm">
    <label>Video Title:</label>
    <input type="text" id="title" required>

    <label>Video Embed Code:</label>
    <textarea id="embed" required placeholder="Paste Vimeo or other embed code here"></textarea>

    <label>Description (optional):</label>
    <textarea id="desc" placeholder="Write a description"></textarea>

    <button type="submit">Upload</button>
</form>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } 
    from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

// Firebase config
const firebaseConfig = {
    apiKey: "AIzaSyBhtICW3CZ3xk2aE-LFUx_hDvmEMMfoHmc",
    authDomain: "old--2005---2012.firebaseapp.com",
    projectId: "old--2005---2012",
    storageBucket: "old--2005---2012.firebasestorage.app",
    messagingSenderId: "151747899362",
    appId: "1:151747899362:web:50517fcdead38e2e57d3bb"
};

// Init
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const form = document.getElementById("uploadForm");
form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const title = document.getElementById("title").value.trim();
    const embed = document.getElementById("embed").value.trim();
    const desc = document.getElementById("desc").value.trim();

    if (!title || !embed) {
        alert("Title and embed code are required.");
        return;
    }

    try {
        await addDoc(collection(db, "videos"), {
            title,
            embed,
            desc,
            timestamp: serverTimestamp()
        });
        alert("Upload successful!");
        form.reset();
    } catch (err) {
        console.error(err);
        alert("Upload failed. Check console for details.");
    }
});
</script>

</body>
</html>
